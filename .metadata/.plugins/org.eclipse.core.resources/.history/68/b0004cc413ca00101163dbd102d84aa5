package prodcons.v7;

import java.util.Properties;

import prodcons.v6.Consumer;

public class TestTaskExecutor {

	public static void main(String[] args) throws Exception {

    	Properties properties = new Properties();
    	properties.loadFromXML(TestTaskExecutor.class.getResourceAsStream("options.xml"));

        int nProd = Integer.parseInt(properties.getProperty("nProd"));
        //int nCons = Integer.parseInt(properties.getProperty("nCons"));
        int bufSz = Integer.parseInt(properties.getProperty("bufSz"));
        int prodTime = Integer.parseInt(properties.getProperty("prodTime"));
        int consTime = Integer.parseInt(properties.getProperty("consTime"));
        int minProd = Integer.parseInt(properties.getProperty("minProd"));
        int maxProd = Integer.parseInt(properties.getProperty("maxProd"));
        
        TaskExecutor exec = new TaskExecutor(bufSz,consTime);
        System.out.println("EXECUTION : V7 (Obj OPT)");

        for (int i = 0; i < nProd; i++) {
            new Producer(exec, minProd,maxProd, prodTime).start();
        }

        Thread.sleep(2000);
        System.out.println("TEST : Produced = " + buffer.totmsg());
        System.out.println("TEST : Consumed = " + Consumer.getTotmsgC());
        System.out.println("FIN TEST Objectif OPTIONNEL");
    }
}