package prodcons.v7;

public class TaskExecutor {
	private final ProdConsBuffer buffer;
	private final int bufSz;

    public TaskExecutor(int bufSz) {
    	this.bufSz = bufSz;
        this.buffer = new ProdConsBuffer(bufSz);
    }
    
    public void executeTAsk(Runnable task) throws InterruptedException {

        TaskMessage msg = new TaskMessage(
                Thread.currentThread().getId(),
                0,
                task
        );

        buffer.put(msg);

        // *** un Consumer dédié pour cette tâche ***
        TaskConsumer cons = new TaskConsumer(buffer);
        cons.start();
    }

}
